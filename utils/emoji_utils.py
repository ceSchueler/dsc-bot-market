import random
from typing import List, Set, Dict


class EmojiManager:
    """
    Manages emoji-related functionality for the bot
    """

    NUMBER_EMOJIS: Dict[str, str] = {
        '0': '0ï¸âƒ£', '1': '1ï¸âƒ£', '2': '2ï¸âƒ£', '3': '3ï¸âƒ£', '4': '4ï¸âƒ£',
        '5': '5ï¸âƒ£', '6': '6ï¸âƒ£', '7': '7ï¸âƒ£', '8': '8ï¸âƒ£', '9': '9ï¸âƒ£'
    }

    def __init__(self):
        self.used_flags: Set[str] = set()
        self._load_flag_emojis()

    def _load_flag_emojis(self):
        """Loads the flag emojis from a predefined list"""
        # Load your FLAG_EMOJIS list here
        self.FLAG_EMOJIS = ['ðŸ‡¦ðŸ‡´', 'ðŸ‡§ðŸ‡«', 'ðŸ‡§ðŸ‡®', 'ðŸ‡§ðŸ‡¯', 'ðŸ‡§ðŸ‡¼', 'ðŸ‡¨ðŸ‡©', 'ðŸ‡¨ðŸ‡«', 'ðŸ‡¨ðŸ‡¬', 'ðŸ‡¨ðŸ‡®', 'ðŸ‡¨ðŸ‡²', 'ðŸ‡¨ðŸ‡»', 'ðŸ‡©ðŸ‡¯', 'ðŸ‡©ðŸ‡¿', 'ðŸ‡ªðŸ‡¬', 'ðŸ‡ªðŸ‡­',
                            'ðŸ‡ªðŸ‡·', 'ðŸ‡ªðŸ‡¹', 'ðŸ‡¬ðŸ‡¦', 'ðŸ‡¬ðŸ‡­', 'ðŸ‡¬ðŸ‡²', 'ðŸ‡¬ðŸ‡³', 'ðŸ‡¬ðŸ‡¶', 'ðŸ‡¬ðŸ‡¼', 'ðŸ‡°ðŸ‡ª', 'ðŸ‡°ðŸ‡²', 'ðŸ‡±ðŸ‡·', 'ðŸ‡±ðŸ‡¸', 'ðŸ‡±ðŸ‡¾', 'ðŸ‡²ðŸ‡¦', 'ðŸ‡²ðŸ‡¬',
                            'ðŸ‡²ðŸ‡±', 'ðŸ‡²ðŸ‡·', 'ðŸ‡²ðŸ‡º', 'ðŸ‡²ðŸ‡¼', 'ðŸ‡²ðŸ‡¿', 'ðŸ‡³ðŸ‡¦', 'ðŸ‡³ðŸ‡ª', 'ðŸ‡³ðŸ‡¬', 'ðŸ‡·ðŸ‡¼', 'ðŸ‡¸ðŸ‡¨', 'ðŸ‡¸ðŸ‡©', 'ðŸ‡¸ðŸ‡±', 'ðŸ‡¸ðŸ‡³', 'ðŸ‡¸ðŸ‡´', 'ðŸ‡¸ðŸ‡¸',
                            'ðŸ‡¸ðŸ‡¿', 'ðŸ‡¹ðŸ‡©', 'ðŸ‡¹ðŸ‡¬', 'ðŸ‡¹ðŸ‡³', 'ðŸ‡¹ðŸ‡¿', 'ðŸ‡ºðŸ‡¬', 'ðŸ‡¿ðŸ‡¦', 'ðŸ‡¿ðŸ‡²', 'ðŸ‡¿ðŸ‡¼', 'ðŸ‡¦ðŸ‡¬', 'ðŸ‡¦ðŸ‡®', 'ðŸ‡¦ðŸ‡·', 'ðŸ‡¦ðŸ‡¼', 'ðŸ‡§ðŸ‡§', 'ðŸ‡§ðŸ‡±',
                            'ðŸ‡§ðŸ‡²', 'ðŸ‡§ðŸ‡´', 'ðŸ‡§ðŸ‡¶', 'ðŸ‡§ðŸ‡·', 'ðŸ‡§ðŸ‡¸', 'ðŸ‡§ðŸ‡¿', 'ðŸ‡¨ðŸ‡¦', 'ðŸ‡¨ðŸ‡±', 'ðŸ‡¨ðŸ‡´', 'ðŸ‡¨ðŸ‡·', 'ðŸ‡¨ðŸ‡º', 'ðŸ‡¨ðŸ‡¼', 'ðŸ‡©ðŸ‡²', 'ðŸ‡©ðŸ‡´', 'ðŸ‡ªðŸ‡¨',
                            'ðŸ‡«ðŸ‡°', 'ðŸ‡¬ðŸ‡©', 'ðŸ‡¬ðŸ‡«', 'ðŸ‡¬ðŸ‡µ', 'ðŸ‡¬ðŸ‡¹', 'ðŸ‡¬ðŸ‡¾', 'ðŸ‡­ðŸ‡³', 'ðŸ‡­ðŸ‡¹', 'ðŸ‡¯ðŸ‡²', 'ðŸ‡°ðŸ‡³', 'ðŸ‡°ðŸ‡¾', 'ðŸ‡±ðŸ‡¨', 'ðŸ‡²ðŸ‡«', 'ðŸ‡²ðŸ‡¶', 'ðŸ‡²ðŸ‡¸',
                            'ðŸ‡²ðŸ‡½', 'ðŸ‡³ðŸ‡®', 'ðŸ‡µðŸ‡¦', 'ðŸ‡µðŸ‡ª', 'ðŸ‡µðŸ‡²', 'ðŸ‡µðŸ‡·', 'ðŸ‡µðŸ‡¾', 'ðŸ‡¸ðŸ‡·', 'ðŸ‡¸ðŸ‡»', 'ðŸ‡¸ðŸ‡½', 'ðŸ‡¹ðŸ‡¨', 'ðŸ‡¹ðŸ‡¹', 'ðŸ‡ºðŸ‡¸', 'ðŸ‡ºðŸ‡¾', 'ðŸ‡»ðŸ‡ª',
                            'ðŸ‡»ðŸ‡¬', 'ðŸ‡»ðŸ‡®', 'ðŸ‡¦ðŸ‡ª', 'ðŸ‡¦ðŸ‡«', 'ðŸ‡¦ðŸ‡¿', 'ðŸ‡§ðŸ‡©', 'ðŸ‡§ðŸ‡­', 'ðŸ‡§ðŸ‡³', 'ðŸ‡§ðŸ‡¹', 'ðŸ‡¨ðŸ‡³',
                            'ðŸ‡­ðŸ‡°', 'ðŸ‡®ðŸ‡©', 'ðŸ‡®ðŸ‡±', 'ðŸ‡®ðŸ‡³', 'ðŸ‡®ðŸ‡¶', 'ðŸ‡®ðŸ‡·', 'ðŸ‡¯ðŸ‡´', 'ðŸ‡¯ðŸ‡µ', 'ðŸ‡°ðŸ‡¬', 'ðŸ‡°ðŸ‡­', 'ðŸ‡°ðŸ‡µ', 'ðŸ‡°ðŸ‡·', 'ðŸ‡°ðŸ‡¼', 'ðŸ‡°ðŸ‡¿', 'ðŸ‡±ðŸ‡¦',
                            'ðŸ‡±ðŸ‡§', 'ðŸ‡±ðŸ‡°', 'ðŸ‡²ðŸ‡²', 'ðŸ‡²ðŸ‡³', 'ðŸ‡²ðŸ‡´', 'ðŸ‡²ðŸ‡»', 'ðŸ‡²ðŸ‡¾', 'ðŸ‡³ðŸ‡µ', 'ðŸ‡´ðŸ‡²', 'ðŸ‡µðŸ‡­', 'ðŸ‡µðŸ‡°', 'ðŸ‡µðŸ‡¸', 'ðŸ‡¶ðŸ‡¦', 'ðŸ‡·ðŸ‡º', 'ðŸ‡¸ðŸ‡¦',
                            'ðŸ‡¸ðŸ‡¬', 'ðŸ‡¸ðŸ‡¾', 'ðŸ‡¹ðŸ‡­', 'ðŸ‡¹ðŸ‡¯', 'ðŸ‡¹ðŸ‡±', 'ðŸ‡¹ðŸ‡²', 'ðŸ‡¹ðŸ‡·', 'ðŸ‡¹ðŸ‡¼', 'ðŸ‡ºðŸ‡¿', 'ðŸ‡»ðŸ‡³', 'ðŸ‡¾ðŸ‡ª', 'ðŸ‡¦ðŸ‡©', 'ðŸ‡¦ðŸ‡±', 'ðŸ‡¦ðŸ‡²', 'ðŸ‡¦ðŸ‡¹',
                            'ðŸ‡§ðŸ‡¦', 'ðŸ‡§ðŸ‡ª', 'ðŸ‡§ðŸ‡¬', 'ðŸ‡§ðŸ‡¾', 'ðŸ‡¨ðŸ‡­', 'ðŸ‡¨ðŸ‡¾', 'ðŸ‡¨ðŸ‡¿', 'ðŸ‡©ðŸ‡ª', 'ðŸ‡©ðŸ‡°', 'ðŸ‡ªðŸ‡¦', 'ðŸ‡ªðŸ‡ª', 'ðŸ‡ªðŸ‡¸', 'ðŸ‡ªðŸ‡º', 'ðŸ‡«ðŸ‡®', 'ðŸ‡«ðŸ‡·',
                            'ðŸ‡¬ðŸ‡§', 'ðŸ‡¬ðŸ‡ª', 'ðŸ‡¬ðŸ‡¬', 'ðŸ‡¬ðŸ‡®', 'ðŸ‡¬ðŸ‡·', 'ðŸ‡­ðŸ‡·', 'ðŸ‡­ðŸ‡º', 'ðŸ‡®ðŸ‡ª', 'ðŸ‡®ðŸ‡²', 'ðŸ‡®ðŸ‡¸', 'ðŸ‡®ðŸ‡¹', 'ðŸ‡¯ðŸ‡ª', 'ðŸ‡±ðŸ‡®', 'ðŸ‡±ðŸ‡¹', 'ðŸ‡±ðŸ‡º',
                            'ðŸ‡±ðŸ‡»', 'ðŸ‡²ðŸ‡¨', 'ðŸ‡²ðŸ‡©', 'ðŸ‡²ðŸ‡ª', 'ðŸ‡²ðŸ‡°', 'ðŸ‡²ðŸ‡¹', 'ðŸ‡³ðŸ‡±', 'ðŸ‡³ðŸ‡´', 'ðŸ‡µðŸ‡±', 'ðŸ‡µðŸ‡¹', 'ðŸ‡·ðŸ‡´', 'ðŸ‡·ðŸ‡¸', 'ðŸ‡·ðŸ‡º', 'ðŸ‡¸ðŸ‡ª', 'ðŸ‡¸ðŸ‡®',
                            'ðŸ‡¸ðŸ‡°', 'ðŸ‡¸ðŸ‡²', 'ðŸ‡ºðŸ‡¦', 'ðŸ‡»ðŸ‡¦', 'ðŸ‡½ðŸ‡°', 'ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿', 'ðŸ´ó §ó ¢ó ³ó £ó ´ó ¿', 'ðŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', 'ðŸ‡¦ðŸ‡¨', 'ðŸ‡¦ðŸ‡¶', 'ðŸ‡¦ðŸ‡¸', 'ðŸ‡¦ðŸ‡º',
                            'ðŸ‡¦ðŸ‡½', 'ðŸ‡§ðŸ‡»', 'ðŸ‡¨ðŸ‡¨', 'ðŸ‡¨ðŸ‡°', 'ðŸ‡¨ðŸ‡µ', 'ðŸ‡¨ðŸ‡½', 'ðŸ‡©ðŸ‡¬', 'ðŸ‡«ðŸ‡¯', 'ðŸ‡«ðŸ‡²', 'ðŸ‡¬ðŸ‡±', 'ðŸ‡¬ðŸ‡¸', 'ðŸ‡¬ðŸ‡º', 'ðŸ‡­ðŸ‡²', 'ðŸ‡®ðŸ‡¨', 'ðŸ‡®ðŸ‡´',
                            'ðŸ‡°ðŸ‡®', 'ðŸ‡²ðŸ‡­', 'ðŸ‡²ðŸ‡µ', 'ðŸ‡³ðŸ‡¨', 'ðŸ‡³ðŸ‡«', 'ðŸ‡³ðŸ‡·', 'ðŸ‡³ðŸ‡º', 'ðŸ‡³ðŸ‡¿', 'ðŸ‡µðŸ‡«', 'ðŸ‡µðŸ‡¬', 'ðŸ‡µðŸ‡³', 'ðŸ‡µðŸ‡¼', 'ðŸ‡·ðŸ‡ª', 'ðŸ‡¸ðŸ‡§', 'ðŸ‡¸ðŸ‡­',
                            'ðŸ‡¸ðŸ‡¯', 'ðŸ‡¸ðŸ‡¹', 'ðŸ‡¹ðŸ‡¦', 'ðŸ‡¹ðŸ‡«', 'ðŸ‡¹ðŸ‡°', 'ðŸ‡¹ðŸ‡´', 'ðŸ‡¹ðŸ‡»', 'ðŸ‡ºðŸ‡²', 'ðŸ‡»ðŸ‡¨', 'ðŸ‡»ðŸ‡º', 'ðŸ‡¼ðŸ‡«', 'ðŸ‡¼ðŸ‡¸', 'ðŸ‡¾ðŸ‡¹']

    def get_number_emoji(self, n: int) -> List[str]:
        """
        Converts a number to its emoji representation
        """
        s = f"{n:02}"  # Ensures leading 0
        return [self.NUMBER_EMOJIS[d] for d in s]

    def get_unique_flag(self) -> str:
        """
        Returns a unique flag emoji that hasn't been used recently
        """
        available_flags = list(set(self.FLAG_EMOJIS) - self.used_flags)

        if not available_flags:
            self.used_flags.clear()
            available_flags = self.FLAG_EMOJIS.copy()

        chosen = random.choice(available_flags)
        self.used_flags.add(chosen)
        return chosen
